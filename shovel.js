"use strict";function getSafeRunner(){function e(e){return Function("return eval("+JSON.stringify(e+"")+")")}var s=this;return function(n,t){var o=function(e){n.send(e,JSON.stringify([].slice.call(arguments,1)))};s.print=o.bind(s,"stdout"),s.console={log:o.bind(s,"stdout")},s.process={stdout:{write:o.bind(s,"stdout")}},s.postMessage=o.bind(s,"message"),o("end",e(t)())}}function run(){var e=vm.createContext();e.setTimeout=function(e,s){"string"==typeof e?setTimeout(new Function(e),s):setTimeout(e,s)},e.clearTimeout=clearTimeout;var s=vm.runInContext("("+getSafeRunner.toString()+")()",e);try{s({send:function(e,s){switch(e){case"stdout":case"end":process.stdout.write(JSON.parse(s)[0]);break;case"message":process.send(JSON.parse(s)[0]);break;default:throw new Error("Unknown event type")}},exit:function(){processExit()}},code)}catch(e){result=e.name+": "+e.message}process.on("message",processMessageListener.bind(null,e)),process.send("__sandbox_inner_ready__"),checkIfProcessFinished(e)}function processMessageListener(e,s){vm.runInContext('if (typeof onmessage === "function") { onmessage('+JSON.stringify(String(s))+"); }",e),checkIfProcessFinished(e)}function checkIfProcessFinished(e){"function"!==vm.runInContext("typeof onmessage",e)&&processExit()}function processExit(){process.removeListener("message",processMessageListener),process.stdout.on("finish",function(){process.exit(0)})}var fs=require("fs"),NodeVM=require("vm2").NodeVM,code="",stdin=process.openStdin(),result,console=[];stdin.on("data",function(e){code+=e}),stdin.on("end",run);