"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Sequence(e){var t={onWarning:null,warningLimit:300};t=extend(t,e);var n=this;this.sequence=[],this.counter=1,this.name=e.name,(0,_setImmediate3.default)(function e(){t.onWarning&&n.sequence.length>=t.warningLimit&&t.onWarning(n.sequence.length,t.warningLimit),n.__tick(function(){setTimeout(e,3)})})}var _setImmediate2=require("babel-runtime/core-js/set-immediate"),_setImmediate3=_interopRequireDefault(_setImmediate2),util=require("util"),extend=require("extend");Sequence.prototype.__tick=function(e){var t=this.sequence.shift();if(!t)return(0,_setImmediate3.default)(e);var n=[function(n,i){t.done&&(0,_setImmediate3.default)(t.done,n,i),(0,_setImmediate3.default)(e)}];t.args&&(n=n.concat(t.args)),t.worker.apply(t.worker,n)},Sequence.prototype.add=function(e,t,n){if(!n&&t&&"function"==typeof t&&(n=t,t=void 0),e&&"function"==typeof e){var i={worker:e,done:n};util.isArray(t)&&(i.args=t),i.counter=this.counter++,this.sequence.push(i)}},Sequence.prototype.count=function(){return this.sequence.length},module.exports=Sequence;